<div class="formation-legend">
  <div class="title-container">
    <h2 class="sbb-headline2">Legend</h2>
  </div>

  <!-- Accessibility section - only shown if there are items -->
  <div class="legend-section" *ngIf="legendAccessibility.length > 0">
    <h3 class="sbb-headline3">Accessibility</h3>
    <div class="legend-grid">
      <div class="legend-item" *ngFor="let item of legendAccessibility">
        <img *ngIf="item.svgPath" [src]="item.svgPath" alt="{{item.label}}" class="legend-svg-icon" loading="eager">
        <span class="legend-label">{{ item.label }}</span>
      </div>
    </div>
  </div>

  <!-- Wagons and Classes - only shown if there are items -->
  <div class="legend-section" *ngIf="legendWagonTypes.length > 0">
    <h3 class="sbb-headline3">Wagons and Classes</h3>
    <div class="legend-grid">
      <div class="legend-item" *ngFor="let item of legendWagonTypes">
        <!-- External SVG for locomotive -->
        <div *ngIf="item.style === 'locomotive'" class="locomotive-container">
          <img [src]="getLocomotiveSvgPath()" alt="Locomotive" class="legend-locomotive-svg" loading="eager">
        </div>
        
        <!-- External SVGs for wagon types -->
        <div *ngIf="item.style === 'mixed'" class="wagon-container-inner">
          <img [src]="getWagonSvgPath(false)" alt="Regular wagon" class="legend-wagon-svg" loading="eager">
          <div class="wagon-text">
            <span class="wagon-class">1/2</span>
          </div>
        </div>
        
        <div *ngIf="item.style === 'closed'" class="wagon-container-inner">
          <img [src]="getWagonSvgPath(true)" alt="Closed wagon" class="legend-wagon-svg" loading="eager">
        </div>
        
        <!-- For items with SVG paths like no-passage -->
        <div *ngIf="item.svgPath && !item.isRange" class="pictogram-box">
          <img [src]="item.svgPath" alt="{{item.label}}" class="legend-svg-icon" loading="eager">
        </div>
        
        <span class="legend-label">{{ item.label }}</span>
      </div>
    </div>
  </div>

  <!-- Occupancy section - only shown if there are items -->
  <div class="legend-section" *ngIf="legendOccupancy.length > 0">
    <h3 class="sbb-headline3">Occupancy</h3>
    <div class="legend-grid">
      <div class="legend-item" *ngFor="let item of legendOccupancy">
        <div class="pictogram-box">
          <img *ngIf="item.svgPath" [src]="item.svgPath" alt="{{item.label}}" class="legend-svg-icon" loading="eager">
        </div>
        <span class="legend-label">{{ item.label }}</span>
      </div>
    </div>
  </div>

  <!-- Facilities section - only shown if there are items -->
  <div class="legend-section" *ngIf="legendFacilities.length > 0">
    <h3 class="sbb-headline3">{{ getFacilitiesTitle() }}</h3>
    <div class="legend-grid">
      <div class="legend-item" *ngFor="let item of legendFacilities">
        <!-- Sector range display with start-end pictograms -->
        <ng-container *ngIf="item.isRange">
          <div class="sector-range">
            <img *ngIf="item.svgPath" [src]="item.svgPath" alt="Start Sector" class="legend-svg-icon" loading="eager">
            <span class="range-separator">-</span>
            <img *ngIf="item.endSvgPath" [src]="item.endSvgPath" alt="End Sector" class="legend-svg-icon" loading="eager">
          </div>
        </ng-container>
        
        <!-- For items with SVG paths that are not ranges -->
        <div *ngIf="item.svgPath && !item.isRange" class="pictogram-box">
          <img [src]="item.svgPath" alt="{{item.label}}" class="legend-svg-icon" loading="eager">
        </div>
        
        <span class="legend-label">{{ item.label }}</span>
      </div>
    </div>
  </div>
</div> 